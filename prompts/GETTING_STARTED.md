# Getting Started with Ralph Loop

## Prerequisites

- Docker and Docker Compose installed
- OpenCode API key (get from https://opencode.ai/auth)
- Git initialized

## Setup

1. **Configure Environment Variables**
    ```bash
    cp .env.example .env
    ```
    Edit `.env` and add your `OPENCODE_API_KEY`

2. **Initialize Git Repository**
    ```bash
    git init
    git add .
    git commit -m "Initial commit: Ralph Loop setup"
    ```

3. **Build Docker Image**
    ```bash
    docker-compose build
    ```

## Your First Project

### Step 1: Write Specifications

Create a spec file in the `specs/` directory:

```bash
# Example: specs/my-feature.md
touch specs/my-feature.md
```

Edit the file with your requirements following the Ralph Wiggum format.

### Step 2: Generate Implementation Plan

```bash
docker-compose exec ralph ./loop.sh planning
```

This will:
- Study your specs
- Analyze existing code
- Generate/update `IMPLEMENTATION_PLAN.md`

### Step 3: Build the Application

```bash
docker-compose exec ralph ./loop.sh building
```

This will:
- Pick tasks from the plan
- Implement them
- Run tests
- Commit changes
- Update `improvements.md`

### Step 4: Quality Assurance

```bash
docker-compose exec ralph ./loop.sh qa
```

This will:
- Run all tests
- Check code quality
- Security analysis
- Generate QA report

## Running Locally (Without Docker)

You can also run the loop directly if you have OpenCode installed locally:

```bash
# Install OpenCode
npm install -g opencode-ai

# Configure API key
opencode auth login
# Select Z.AI provider and enter your API key

# Run the loop
./loop.sh planning
./loop.sh building
./loop.sh qa
```

## Key Files

- **agents.md**: Keep this updated with build/test commands
- **improvements.md**: Automatically updated with progress
- **IMPLEMENTATION_PLAN.md**: Generated by planning mode
- **specs/*:** Your application specifications
- **prompts/\*: Prompt templates for each mode

## Tips

- **Regenerate the plan**: If the loop goes in circles, delete `IMPLEMENTATION_PLAN.md` and run planning mode again
- **Limit iterations**: Use `./loop.sh building 10` to limit to 10 tasks
- **Watch the logs**: Docker logs show real-time progress
- **Git integration**: Each commit creates a version tag (0.0.1, 0.0.2, etc.)

## Common Issues

**Q: OpenCode not found**
- Ensure Docker built successfully: `docker-compose build`

**Q: Permissions denied**
- Make sure `loop.sh` is executable: `chmod +x loop.sh`
- Check `opencode.json` has `"permission": "allow"`

**Q: API key errors**
- Check your `.env` file has `OPENCODE_API_KEY` set correctly
- Run `opencode auth list` to verify credentials

## Next Steps

1. Write your first specification file in `specs/`
2. Run `./loop.sh planning` to generate the plan
3. Run `./loop.sh building` to start implementation
4. Monitor progress in `improvements.md`

Happy building! ðŸš€

